    /** @test */

    public function it_can_ask_question_with_multiple_callbacks()
    {
        $conversation = new TestConversation();
        $question = 'Will this test work?';
        $closure = function ($answer) {
        };

        $serializer = m::mock(Serializer::class);
        $serializer->shouldReceive('serialize')->andReturn('serialized_closure');

        $bot = m::mock(BotMan::class);
        $bot->shouldReceive('getSerializer')->andReturn($serializer);
        $bot->shouldReceive('getToken');
        $bot->shouldReceive('reply')
            ->once()
            ->with($question, []);
        $bot->shouldReceive('storeConversation')
            ->once()
            ->with($conversation, m::type('array'), $question, []);

        $conversation->setBot($bot);
        $conversation->ask($question, [
            [
                'pattern' => 'Sure',
                'callback' => $closure,
            ],
            [
                'pattern' => 'No way',
                'callback' => $closure,
            ],
        ]);
    }
