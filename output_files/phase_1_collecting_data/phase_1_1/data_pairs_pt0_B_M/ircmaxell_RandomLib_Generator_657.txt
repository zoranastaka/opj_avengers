    /**
     * Count the minimum number of bits to represent the provided number
     *
     * This is basically floor(log($number, 2))
     * But avoids float precision issues
     *
     * @param int $number The number to count
     *
     * @return int The number of bits
     */

    protected function countBits($number)
    {
        $log2 = 0;
        while ($number >>= 1) {
            $log2++;
        }

        return $log2;
    }
