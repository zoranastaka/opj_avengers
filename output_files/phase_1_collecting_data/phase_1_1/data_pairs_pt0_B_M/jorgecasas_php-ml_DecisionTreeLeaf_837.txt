    /**
     * Returns Mean Decrease Impurity (MDI) in the node.
     * For terminal nodes, this value is equal to 0
     */

    public function getNodeImpurityDecrease(int $parentRecordCount): float
    {
        if ($this->isTerminal) {
            return 0.0;
        }

        $nodeSampleCount = (float) count($this->records);
        $iT = $this->giniIndex;

        if ($this->leftLeaf !== null) {
            $pL = count($this->leftLeaf->records) / $nodeSampleCount;
            $iT -= $pL * $this->leftLeaf->giniIndex;
        }

        if ($this->rightLeaf !== null) {
            $pR = count($this->rightLeaf->records) / $nodeSampleCount;
            $iT -= $pR * $this->rightLeaf->giniIndex;
        }

        return $iT * $nodeSampleCount / $parentRecordCount;
    }
