    /**
     * @test
     */

    public function can_define_max_exceptions_property_on_queued_import()
    {
        $maxExceptionsCount = 0;

        Queue::exceptionOccurred(function (JobExceptionOccurred $event) use (&$maxExceptionsCount) {
            if ($event->job->resolveName() === ReadChunk::class) {
                $maxExceptionsCount = $this->inspectJobProperty($event->job, 'maxExceptions');
            }
        });

        try {
            $import                = new QueuedImportWithFailure();
            $import->maxExceptions = 3;
            $import->queue('import-batches.xlsx');
        } catch (Throwable $e) {
            $this->assertEquals('Something went wrong in the chunk', $e->getMessage());
        }

        $this->assertEquals(3, $maxExceptionsCount);
    }
