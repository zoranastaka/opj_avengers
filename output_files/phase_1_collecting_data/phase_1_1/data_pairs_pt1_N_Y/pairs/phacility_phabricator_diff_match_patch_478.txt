	/**
	 * Merge a set of patches onto the text.  Return a patched text, as well
	 * as a list of true/false values indicating which patches were applied.
	 * @param {Array.<patch_obj>} patches Array of patch objects.
	 * @param {string} text Old text.
	 * @return {Array.<string|Array.<boolean>>} Two element Array, containing the
	 *      new text and an array of boolean values.
	 */

	function patch_apply($patches, $text) {
		if ( count($patches) == 0) {
			return array($text,array());
		}
