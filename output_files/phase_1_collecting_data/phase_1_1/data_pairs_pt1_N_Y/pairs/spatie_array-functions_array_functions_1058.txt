/**
 * Get a random value from an array, with the ability to skew the results.
 * Example: array_rand_weighted(['foo' => 1, 'bar' => 2]) has a 66% chance of returning bar.
 *
 * @param array $array
 *
 * @return mixed
 */

function array_rand_weighted(array $array)
{
    $array = array_filter($array, function ($item) {
        return $item >= 1;
    });

    if (! count($array)) {
        return;
    }
    $totalWeight = array_sum($array);

    foreach ($array as $value => $weight) {
        if (rand(1, $totalWeight) <= $weight) {
            return $value;
        }
        $totalWeight -= $weight;
    }
}
