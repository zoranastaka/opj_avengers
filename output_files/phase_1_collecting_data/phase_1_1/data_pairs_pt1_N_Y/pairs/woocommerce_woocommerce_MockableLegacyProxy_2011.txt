	/**
	 * Gets an instance of a given legacy class.
	 * This must not be used to get instances of classes in the `src` directory.
	 *
	 * If a mock has been defined for the requested class using `register_class_mocks`, then the registered
	 * object will be returned or the registered callback will be used to generate the instance to return.
	 *
	 * @param string $class_name The name of the class to get an instance for.
	 * @param mixed  ...$args Parameters to be passed to the callback function or to the parent class method.
	 *
	 * @return object The (possibly mocked) instance of the class.
	 * @throws \Exception The requested class belongs to the `src` directory, or there was an error creating an instance of the class.
	 */

	public function get_instance_of( string $class_name, ...$args ) {
		if ( array_key_exists( $class_name, $this->mocked_classes ) ) {
			$mock = $this->mocked_classes[ $class_name ];
			return is_callable( $mock ) ? call_user_func_array( $mock, $args ) : $mock;
		}
