	/**
	 * Register a new hack.
	 *
	 * @param mixed $hack A function with signature "hack($code, $path)" or an object containing a method with that signature.
	 * @throws \Exception Invalid input.
	 */

	public static function add_hack( $hack ) {
		if ( ! self::is_valid_hack_object( $hack ) ) {
			$class = get_class( $hack );
			throw new \Exception( "CodeHacker::add_hack for instance of $class: Hacks must be objects having a 'process(\$text, \$path)' method and a 'reset()' method." );
		}
