    /**
     * @covers ::getHeader
     * @covers ::computeHeader
     * @covers ::getRecords
     * @covers ::setHeader
     * @covers \League\Csv\SyntaxError::dueToDuplicateHeaderColumnNames
     * @covers \League\Csv\SyntaxError::duplicateColumnNames
     */

    public function testHeaderThrowsExceptionOnError(): void
    {
        $csv = Reader::createFromString(
            'field1,field1,field3
            1,2,3
            4,5,6'
        );
        $csv->setHeaderOffset(0);
        self::assertSame(['field1', 'field1', 'field3'], $csv->getHeader());
        try {
            iterator_to_array($csv);
        } catch (SyntaxError $exception) {
            self::assertSame(['field1'], $exception->duplicateColumnNames());
        }
    }
