    /**
     * @dataProvider provideMethodsThatNeedATerminatedProcess
     */

    public function testMethodsThatNeedATerminatedProcess($method)
    {
        $this->expectException(LogicException::class);
        $this->expectExceptionMessage('Process must be terminated before calling');
        $process = $this->getProcessForCode('sleep(37);');
        $process->start();
        try {
            $process->{$method}();
            $process->stop(0);
            $this->fail('A LogicException must have been thrown');
        } catch (\Exception $e) {
        }
        $process->stop(0);

        throw $e;
    }
