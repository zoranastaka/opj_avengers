    /**
     * Send the response the client
     *
     * @param ResponseInterface $response
     * @return void
     */

    public function emit(ResponseInterface $response): void
    {
        $isEmpty = $this->isResponseEmpty($response);
        if (headers_sent() === false) {
            $this->emitStatusLine($response);
            $this->emitHeaders($response);
        }

        if (!$isEmpty) {
            $this->emitBody($response);
        }
    }
