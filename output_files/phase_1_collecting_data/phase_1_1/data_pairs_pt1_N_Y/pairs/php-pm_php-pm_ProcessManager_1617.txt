                // todo: connection has to be null-checked, because of race conditions with many workers. fixed in #366

                $connection->on('close', function () use ($onSlaveClosed, $slave) {
